const fs = require('fs');
const execa = require('execa');
const testOutput = `<svg width="0" height="0" class="svg-sprite" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs/><symbol id="svg-code" viewBox="0 0 29 29"><path d="m8.24 19.73-5.39-5.39 5.39-5.39V6.22L.12 14.34l8.12 8.12v-2.73zm12.52 2.73 8.12-8.12-8.12-8.12v2.73l5.39 5.39-5.39 5.39v2.73zM16.986 2.956l1.849.553-6.742 22.544-1.85-.553z"/></symbol><symbol id="svg-link" viewBox="0 0 22 22"><path d="M18.3 18.3H3.7V3.7l3.7-.1V0H0v22h22v-9.2h-3.7v5.5zM11 0l3.7 3.7-5.5 5.5 3.7 3.7 5.5-5.5L22 11V0H11z"/></symbol><symbol id="svg-search" viewBox="0 0 83 86.7"><path d="M80.6 86.2c-.5 0-.9-.2-1.2-.5L54.5 60.8l-.3.3c-5.8 4.3-12.8 6.6-20 6.6-9.1 0-17.6-3.6-23.9-10C4 51.3.6 42.8.6 33.9c.1-9 3.6-17.4 10-23.7C16.9 4 25.3.5 34.2.5c9.1 0 17.6 3.6 23.9 10 6.3 6.4 9.7 14.9 9.7 23.8s-3.6 17.4-10 23.7l-.4.4L81.9 83l.1.1c.7.7.7 1.8 0 2.5-.3.4-.8.6-1.4.6zM34.1 3.3C17.2 3.3 3.5 17.1 3.5 34s13.8 30.7 30.7 30.7C51 64.7 64.8 50.9 64.8 34S51 3.3 34.1 3.3z"/><path d="M34.1 1c8.9 0 17.3 3.5 23.6 9.9 12.8 13 12.7 34-.3 46.8l-.7.7.7.7 24.2 24.2.1.1c.5.5.5 1.3 0 1.8-.3.3-.6.4-1 .4-.3 0-.7-.1-.9-.3L55.2 60.8l-.6-.6-.7.5c-5.8 4.3-12.6 6.5-19.7 6.5-8.9 0-17.3-3.5-23.6-9.9-12.8-13-12.7-34 .3-46.8C17.1 4.4 25.3 1 34.1 1m0 64.2c17.2 0 31.2-14 31.2-31.2S51.3 2.8 34.1 2.8 3 16.8 3 34s13.9 31.2 31.1 31.2m0-65.2c-8.6 0-17.3 3.3-23.9 9.8C-3.2 23-3.4 44.6 9.8 58c6.6 6.7 15.4 10.2 24.3 10.2 7.1 0 14.3-2.2 20.3-6.7L79 86.1c.5.4 1 .6 1.6.6.6 0 1.3-.3 1.7-.8.8-.9.8-2.3 0-3.2L58 58.4c13.4-13.2 13.6-34.8.4-48.2C51.7 3.4 42.9 0 34.1 0zm0 64.2C17.5 64.2 4 50.7 4 34S17.5 3.8 34.1 3.8 64.3 17.3 64.3 34 50.8 64.2 34.1 64.2z"/></symbol></svg>`;

test('generates the right template from a folder of SVGs', async () => {
  await execa('./bin/index.js', ['--src=fixtures/**/*.svg','--sprite=fixtures/svg-sprite.html']);
  expect(fs.readFileSync('fixtures/svg-sprite.html').toString()).toEqual(testOutput)
});
